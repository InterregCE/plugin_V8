<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:clf="http://www.w3.org/1999/xhtml">
<!--/*@thymesVar id="projectDataSectionB" type="io.cloudflight.jems.plugin.contract.models.project.sectionB.ProjectDataSectionB"*/-->
<!--/*@thymesVar id="clfUtils" type="io.cloudflight.jems.plugin.standard.common.template.TemplateUtils"*/-->

<head>
    <link rel="stylesheet" type="text/css" media="all" href="./../styles/common.css"
          th:href="@{./../styles/common.css}"/>
</head>
<body>
<th:block th:fragment="partnersOverviewTable(projectDataSectionB)">
    <table class="default-table"
           th:if="${#lists.size(projectDataSectionB.partners) > 0}">
        <thead class="table-header">
        <tr>
            <th th:text="#{jems.standard.application.form.export.partner.number}">Number</th>

            <th clf:ifAnyFieldIsVisible="PARTNER_ENGLISH_NAME_OF_ORGANISATION"
                th:text="#{jems.standard.application.form.export.partner.name.in.english}">
                Partner name in English
            </th>

            <th clf:ifAnyFieldIsVisible="PARTNER_MAIN_ADDRESS_COUNTRY_AND_NUTS"
                th:text="#{jems.standard.application.form.export.partner.country}">
                Country
            </th>

            <th clf:ifAnyFieldIsVisible="PARTNER_ABBREVIATED_ORGANISATION_NAME"
                th:text="#{jems.standard.application.form.export.partner.abbreviation}">Abbreviation
            </th>

            <th clf:ifAnyFieldIsVisible="PARTNER_ROLE"
                th:text="#{jems.standard.application.form.export.partner.role}">Role
            </th>

            <th clf:ifAnyFieldIsVisible="PARTNER_ASSOCIATED_ORGANIZATIONS"
                th:text="#{jems.standard.application.form.export.partner.associated.organizations}">
                Associated organizations
            </th>
        </tr>
        </thead>
        <tbody class="table-body">
        <tr th:each="partner, rowStat: ${clfUtils.sortPartnersBySortNumber(projectDataSectionB.partners)}"
            th:object="${partner}">
            <td th:text="*{sortNumber}"></td>
            <td clf:ifAnyFieldIsVisible="PARTNER_ENGLISH_NAME_OF_ORGANISATION"
                th:text="*{nameInEnglish}">
            </td>
            <td clf:ifAnyFieldIsVisible="PARTNER_MAIN_ADDRESS_COUNTRY_AND_NUTS"
                th:with="mainAddress=${clfUtils.getMainAddress(partner.addresses)}"
                th:text="${mainAddress?.country}">
            </td>
            <td clf:ifAnyFieldIsVisible="PARTNER_ABBREVIATED_ORGANISATION_NAME"
                th:text="*{abbreviation}"></td>
            <td clf:ifAnyFieldIsVisible="PARTNER_ROLE"
                th:text="*{role?.isLead()}?
         #{jems.standard.application.form.export.partner.lead.partner}:#{jems.standard.application.form.export.partner.project.partner}">
            </td>
            <td clf:ifAnyFieldIsVisible="PARTNER_ASSOCIATED_ORGANIZATIONS">
                <th:block th:each="associatedOrganization, rowStat: ${projectDataSectionB.associatedOrganisations}">
                    <div th:if="${associatedOrganization.partner.id} == ${partner.id}"
                         th:text="#{jems.standard.application.form.export.associated.organization(${associatedOrganization.nameInOriginalLanguage}, ${associatedOrganization.sortNumber})}">
                        associated organization #1
                    </div>
                </th:block>
            </td>
        </tr>
        </tbody>
    </table>
</th:block>
</body>
</html>
