<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="projectData" type="io.cloudflight.jems.plugin.contract.models.project.ProjectData"*/-->
<!--/*@thymesVar id="clfUtils" type="io.cloudflight.jems.plugin.standard.common.template.TemplateUtils"*/-->
<body>
<th:block th:fragment="applicationFormIndex(projectData)">
    <bookmarks>
        <bookmark
                th:name="#{jems.standard.application.form.export.application.form.title(${projectData.sectionA?.customIdentifier},${projectData.sectionA?.acronym})}"
                href="#first-page"
        >
            <th:block th:object="${projectData}"
                      th:if="${projectData.sectionB.partners.size() > 0  || projectData.sectionB.associatedOrganisations.size() > 0}">
                <bookmark th:name="#{jems.standard.application.form.export.section.b.partners}" href="#sectionB">
                    <bookmark th:if="${projectData.sectionB.partners.size() > 0}"
                              th:name="#{jems.standard.application.form.export.partner.overview}"
                              href="#partnersOverview">
                        <bookmark
                                th:each="partner, rowStat: ${clfUtils.sortPartnersBySortNumber(projectData.sectionB.partners)}"
                                th:object="${partner}"
                                th:with="partnerTitle = *{role?.isLead()} ? #{jems.standard.application.form.export.partner.detail.lead.partner.title}: #{jems.standard.application.form.export.partner.detail.project.partner.title(*{sortNumber})}"
                                th:name="${partner.role?.isLead() ? 'LP' : 'PP'} + *{sortNumber} + ' ' + ${partner.abbreviation}"
                                th:href="'#'+${partnerTitle}">
                        </bookmark>
                    </bookmark>
                    <bookmark th:if="${projectData.sectionB.associatedOrganisations.size() > 0}"
                              href="#associatedOrganizations"
                              th:name="#{jems.standard.application.form.export.partner.associated.organizations}">
                        <bookmark
                                th:each="associatedOrganization, rowStat: ${clfUtils.sortAssociatedOrganizationsBySortNumber(projectData.sectionB.associatedOrganisations)}"
                                th:object="${associatedOrganization}"
                                th:with="associatedOrganizationTitle = #{jems.standard.application.form.export.associated.organization(${associatedOrganization.nameInOriginalLanguage}, ${associatedOrganization.sortNumber})}"
                                th:name="${associatedOrganizationTitle}"
                                th:href="'#'+${associatedOrganizationTitle}">
                        </bookmark>
                    </bookmark>
                </bookmark>
            </th:block>
        </bookmark>
    </bookmarks>
</th:block>
</body>
</html>
